---
// Import Site data
import { sitePages } from "@/data/siteData";

// Layout import
import MainLayout from "@layouts/MainLayout.astro";

// Component imports
import Searchbar from "@/components/ui/Searchbar.astro";
import Wrapper from "@/components/utilities/Wrapper.astro";

const page = sitePages.home;
---

<MainLayout
  title={page.title}
  description={page.description}
  ogImage={page.ogImage}
>
  <Wrapper>
    <h1 class="visually-hidden">Dictionary Web App</h1>
    <Searchbar />
    <div id="results"></div>

    <template id="word-header-template">
      <header class="word-header">
        <h2 class="word"></h2>
        <p class="phonetic"></p>
        <button type="button" class="audio-button">
          <span class="visually-hidden">Play pronunciation</span>
          <svg
            class="play-svg"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 75 75"
            ><g fill-rule="evenodd"
              ><circle class="bg" cx="37.5" cy="37.5" r="37.5"></circle><path
                class="fg"
                d="M29 27v21l21-10.5z"></path></g
            ></svg
          >
        </button>
      </header>
    </template>

    <template id="details-template">
      <ul class="meaning-list"></ul>
    </template>

    <template id="meaning-list-item-template">
      <li class="meaning-list-item">
        <h3 class="meaning-title">
          <span class="text"></span>
          <span class="line" aria-hidden="true"></span>
        </h3>

        <div class="details">
          <section class="definitions">
            <h4>Meaning</h4>
            <ul class="definitions-list"></ul>
          </section>
        </div>
      </li>
    </template>

    <template id="definitions-list-item-template">
      <li>
        <div class="definition-group">
          <p class="definition"></p>
          <p class="example"></p>
        </div>
      </li>
    </template>

    <template id="synonyms-template">
      <section class="synonyms">
        <h4>Synonyms</h4>
        <ul class="synonyms-list"></ul>
      </section>
    </template>

    <template id="antonyms-template">
      <section class="antonyms">
        <h4>Antonyms</h4>
        <ul class="antonyms-list"></ul>
      </section>
    </template>

    <template id="flex-list-item-template">
      <li>
        <button type="button"></button>
      </li>
    </template>

    <template id="source-template">
      <footer class="source-footer">
        <p>Source</p>
        <div class="link">
          <a href="" target="_blank"></a>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14"
            ><path
              fill="none"
              stroke="#838383"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="1.5"
              d="M6.09 3.545H2.456A1.455 1.455 0 0 0 1 5v6.545A1.455 1.455 0 0 0 2.455 13H9a1.455 1.455 0 0 0 1.455-1.455V7.91m-5.091.727 7.272-7.272m0 0H9m3.636 0V5"
            ></path></svg
          >
        </div>
      </footer>
    </template>

    <template id="not-found-template">
      <section class="not-found" aria-live="polite">
        <p class="emoji" aria-hidden="true">ðŸ˜•</p>
        <p class="message"></p>
        <p class="resolution"></p>
      </section>
    </template>
  </Wrapper>
</MainLayout>

<style lang="scss">
  // Word header
  .word-header {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: var(--space-cont-2xs);
    margin-block-start: var(--pad-sect-xs);

    .word {
      font: var(--font-1);
    }

    .phonetic {
      font: var(--font-3);
      color: var(--fg-text-accent);
    }

    // Audio button
    .audio-button {
      grid-column: -2 / -1;
      grid-row: 1 / 3;
      height: var(--size-svg-play);
      align-self: center;
      background: none;
      border: none;
      cursor: pointer;
      border-radius: var(--br-round);

      &:not(:disabled) {
        cursor: pointer;
      }

      .play-svg {
        width: var(--size-svg-play);

        .bg {
          fill: var(--bg-play-svg-idle);
          transition: fill var(--trans-default);
        }
        .fg {
          fill: var(--fg-play-svg-idle);
          transition: fill var(--trans-default);
        }
      }

      @media (hover: hover) {
        &:hover {
          .play-svg {
            .bg {
              fill: var(--bg-play-svg-hover);
            }
            .fg {
              fill: var(--fg-play-svg-hover);
            }
          }
        }
      }

      &:disabled {
        cursor: not-allowed;
        pointer-events: none;

        .play-svg {
          .bg {
            fill: var(--bg-play-svg-disabled);
          }
          .fg {
            fill: var(--fg-play-svg-disabled);
          }
        }
      }
    }
  }

  // Part of speech list
  .meaning-list {
    display: grid;
    gap: var(--size-32px-40px-40px);
    margin-block-start: var(--pad-sect-md);
    list-style-type: none;

    h3 {
      display: flex;
      align-items: center;
      gap: var(--space-cont-lg);
      font: var(--font-2);

      .line {
        display: inline-block;
        height: var(--bw-md);
        width: 100%;
        background-color: var(--bc-divider-body);
      }
    }

    .details {
      display: grid;
      gap: var(--size-24px-36px-60px);
      margin-block-start: var(--size-32px-40px-40px);

      h4 {
        font: var(--font-5);
        color: var(--fg-text-muted);
      }

      // Definitions
      .definitions-list {
        display: grid;
        gap: var(--space-cont-sm);
        list-style-type: none;
        margin-block-start: var(--space-cont-xl);

        > li {
          display: grid;
          gap: var(--space-cont-lg);
          grid-template-columns: auto 1fr;

          &::before {
            content: "";
            width: 0.3125rem;
            aspect-ratio: 1;
            border-radius: var(--br-round);
            background-color: var(--clr-brand-primary-600);
            margin-block-start: var(--space-cont-xs);
            margin-inline-start: var(--pad-cont-xs);
          }

          .definition-group {
            display: grid;
            gap: var(--space-cont-sm);
          }

          .example {
            color: var(--fg-text-muted);
          }
        }
      }

      // Synonyms + Antonyms
      .synonyms,
      .antonyms {
        display: grid;
        grid-template-columns: auto 1fr;
        gap: var(--space-cont-xl);

        ul {
          display: flex;
          flex-wrap: wrap;
          gap: var(--space-cont-md);
          list-style-type: none;

          button {
            position: relative;
            font: var(--font-4);
            color: var(--fg-text-accent);
            background: none;
            border: none;
            cursor: pointer;

            &::before {
              content: "";
              position: absolute;
              width: 100%;
              bottom: 0;
              height: var(--bw-md);
              background-color: currentColor;
              transform: scaleX(0);
              transform-origin: left center;
              transition: transform var(--trans-default-sensitive);
            }

            @media (hover: hover) {
              &:hover {
                &::before {
                  transform: scaleX(1);
                }
              }
            }
          }
        }
      }
    }
  }

  // Source footer
  .source-footer {
    margin-block-start: var(--pad-sect-lg);
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    row-gap: var(--space-cont-2xs);
    column-gap: var(--space-cont-lg);
    border-top: var(--border-divider-body);
    padding-block-start: var(--size-32px-20px-20px);

    p {
      font: var(--font-9);
      color: var(--fg-text-muted);
      text-decoration: underline;
    }

    .link {
      display: flex;
      align-items: center;
      gap: var(--space-cont-xs);

      a {
        font: var(--font-9);
        color: var(--fg-text-default);
        transition: color var(--trans-default);

        @media (hover: hover) {
          &:hover {
            color: var(--fg-text-accent);
          }
        }
      }

      svg {
        width: var(--size-svg-new-window);
      }
    }
  }

  // Not found
  .not-found {
    text-align: center;
    margin-block-start: var(--pad-sect-xl);

    .emoji {
      font-size: var(--size-svg-not-found-emoji);
    }

    .message {
      font: var(--font-4);
      margin-block-start: var(--size-24px-48px-48px);
    }

    .resolution {
      font: var(--font-7);
      color: var(--fg-text-muted);
      margin-block-start: var(--space-cont-lg);
    }
  }
</style>
